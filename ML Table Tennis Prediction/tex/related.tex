\section{Background}
%\subsection{Table tennis}
%\denes{not sure about section headers, but it would make sense to separate out the background from the ML. Also, can we have citations for the data, please?}
Table tennis is played by hundreds of millions of people world-wide, with almost 40 000 professionals registered with the International Table Tennis Federation (ITTF). Games are fast-paced and highly technical, but there are  factors that make it attractive for mathematical modelling: matches have only two possible outcomes (there are no draws), and as an individual sport, there is no need to consider team line-ups.

A table tennis match consists of a sequence of sets; in a professional singles match, the first player to win best of seven sets wins the match. 
%In doubles (two teams of two players play against each other), the first team to win best of five sets wins the match. 
This paper will be looking at modelling professional singles matches only.
In a set, the first player that earns at least eleven points and at least two more than their opponent wins the set. Each player serves twice before alternating, however, if the score reaches at least 10-10, each player serves only once before alternating.  
%The sport has proven to be very popular, with more than three hundred million players worldwide. %, a large proportion residing in East Asia.
The full set of rules are published by the ITTF \cite{ITTF}.

\section{Related Work} \label{sec:relatedwork}
\subsection{Machine Learning}
%\denes{We might want to just remove this subsection; it might be worth taking a look at some similar publications to check whether they even bother to include supervised learning in their related work (I suspect not)}.
Machine learning (ML) is a branch of artificial intelligence that has been successfully applied to many areas of industry and science, including disease diagnosis in medicine \cite{kourou2015machine}, pattern recognition \cite{weiss1989empirical}, computer vision \cite{khan2020machine} and bioinformatics \cite{larranaga2006machine}.
%This paper will be using supervised ML methods, as match instances are labelled and used to estimate the desired outcome.
The problem of predicting a table tennis match can be thought of as a supervised binary classification problem, with unambiguous ground-truth match outcome labels widely available. %as data is categorized into one of two possible classes.


\subsection{ML in Sports}
%\todo{A general overview of ML in sports}

In the past, manual data collection methods for sports have typically proven time-consuming and prone to human error and bias. Recent improvements in data capture has sparked interest in automatic data collection and analysis for a range of sports. Xing \etal \cite{xing2010multiple} proposed a dual-mode two-way Bayesian inference approach to track multiple highly dynamic and interactive players from videos in team sports such as basketball, football and hockey. Claudino \etal \cite{claudino2019current} used different ML methods, such as neural networks and decision tree classifiers, to investigate injury risk and performance in football, basketball, handball and volleyball. Davoodi and Khanteymoori \cite{davoodi2010horse} used neural networks for horse racing prediction, where eight features were used as input nodes to each neural network. This included information such as horse weight and race distance, to predict the eventual finishing time and rank of every horse in a race. 

% quite interesting, but potentially too much about horses
%Some horses lacked performance data, and had to be excluded from the analysis.


%therefore it would not be adequate to use it's history for prediction. As such, these horses had to be removed from the dataset to achieve better results.

Applications of ML in sports can help players and performance analysts in identifying critical factors that contribute to winning. Appropriate tactics can be identified in maximising player performance.
Aside from formulating strategies to win matches, using machine learning methods for sport result prediction has become popular due to the expanding domain in betting \cite{bunker2019machine}, which necessitates high predictive accuracy. Other applications include automated scouting and recruitment \cite{bunker2019machine} and umpiring assistance \cite{vzemgulys2018recognition}.


\subsection{Prediction in Tennis}
A number of data-driven models are available for \textit{tennis}. 
Clarke and Dyte \cite{clarke2000using} predicted the outcome of professional tennis matches with 61--69\% accuracy using player rating points. Mapping player ability to a single rank can fail to capture complex factors, especially when comparing lower-rated players. In our paper we consider more complex features.

Barnett and Clarke \cite{barnett2005combining} use rich historical data to predict the probability of a player winning a single point, building up a Markov chain to predict the winner of a match. The authors' approach is compelling, but there is no published data on the accuracy of their model on a larger dataset.

Knottenbelt \etal \cite{knottenbelt2012common} proposed a common opponent model to find a pre-play estimate of winning a match. This was achieved by analysing match statistics for opponents that both players encountered in the past. %, which provided for a fair basis comparison. 
The model computed the probability of each player winning a point on their serve, and hence the match. The authors found a 59--77\% accuracy, with an estimated return on investment of 6.85\% when put into the betting market for over four major tennis tournaments in 2011. 

%Due to similarities between tennis and table tennis, certain concepts can be applied from works that have been conducted in tennis.

%Both are ideal sports to apply hierarchical probability models to; a table tennis match consists of a sequence of sets, which consists of a sequence of points.

\subsection{ML in Table tennis}
In table tennis, ML research has focused so far on computer vision and automated data collection. % and  a number of computer vision based approaches have been applied. 
Voeikov \etal \cite{voeikov2020ttnet} proposed a neural network (TTNet) that allowed for real-time processing of high-resolution table tennis videos. They extract temporal and spatial data, such as ball detection and in-game events,  potentially replacing manual data collection by sport scouts. The model can also assist referees. More recently, Zhang \etal \cite{zhang2010visual} used computer vision to allow a robot to play table tennis. They computed the 3D coordinates of a table tennis ball from a pair of video feeds to estimate the trajectory, the landing and striking point.

We build on these existing works by utilising data by Voeikov \etal \cite{voeikov2020ttnet}, and apply it to the yet unexplored problem of supervised table tennis match prediction.
%, however, this study does not extend to predicting the match outcome.

%Current works in table tennis mainly focus on ball detection or calculating ball speed, where the focus has been on data collection rather than analysis. Predicting the result of a match has not yet been addressed, thus leading to the development of this project.


